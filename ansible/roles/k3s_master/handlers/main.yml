---
# 1. 커널 파라미터 적용 핸들러
# 설명: 마스터 노드의 네트워크 설정(sysctl) 변경 시 즉시 반영합니다.
- name: Reload sysctl
  command: sysctl --system
  become: true

# 2. K3s Master 서비스 재시작 핸들러
# 설명: K3s 설치가 완료되거나 설정이 변경되었을 때 서비스를 재시작합니다.
- name: Restart k3s
  systemd:
    name: k3s
    state: restarted
    daemon_reload: yes
  become: true

# 3. K3s 설정 리로드 핸들러
# 설명: 서비스를 완전히 껐다 켜지 않고 설정만 다시 읽어옵니다.
- name: Reload k3s configuration
  systemd:
    name: k3s
    state: reloaded
  become: true